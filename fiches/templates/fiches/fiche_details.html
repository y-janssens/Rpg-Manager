{% extends "base/index.html" %} 
{% load static %} 
{% block content %}

<div class="container">

    {% include 'fiches/modes.html' %}

    <div id="cssactif_fiche">

        <div class="fiche-section">
                <div id="cssactif_fiche_header" class="{{fiche.group}}"></div>
            </div>

            <div class="fiche-section">
                <div class="fiche-title">◈ Personnage ◈</div>
                    {% include 'fiches/player_block.html' %}
            </div>

            <div class="fiche-section">
                <div class="fiche-title">◈ Compétences ◈</div>
                    {% include 'competences/competences_details.html' %}
            </div>

            <div class="fiche-section">
                <div class="fiche-title">◈ Équipement ◈</div>
                    {% include 'equipement/equipement_details.html' %}  
            </div>

            <div class="fiche-section">
                <div class="fiche-title">◈ Doubles Comptes ◈</div>
                    {% include 'fiches/aliases_details.html' %}  
            </div>
            
            <div class="fiche-section">
                <div class="fiche-title">◈ Réputations ◈</div>
                    {% include 'reputations/reputations_details.html' %}
            </div>

            <div class="fiche-section">
                <div class="fiche-title">◈ Succès ◈</div>
                    {% include 'succes/succes_details.html' %}
            </div>

            <div class="fiche-section">
                <div class="fiche-title">◈ Cartes ◈</div>
                    {% include 'cartes/cartes_details.html' %} 
            </div>

        </div>

    

</div>
</div>

<script >
    $('#rank').on('change', function(){
        $(this).closest('form').submit();
    });

    $('#guild').on('change', function(){
        $(this).closest('form').submit();
    });

    $('#avatar_url').on('change', function(){
        $(this).closest('form').submit();
    });

    $('#id_avatar').on('change', function(){
        $(this).closest('form').submit();
    });

    const handleUpload = (url) => {
        document.getElementById('avatar_file_name').value = url.split(/(\\|\/)/g).pop();
    }

    const properClassName = () => {
        let title = document.getElementById('cssactif_fiche_header');
        title.className = title.className.toLowerCase().replace(/[^a-zA-Z0-9]/g, '')
    }

    window.onload = properClassName();
        
</script>

{% endblock %}